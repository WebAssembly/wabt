;;; TOOL: run-interp-spec
;;; STDIN_FILE: third_party/testsuite/proposals/gc/br_on_cast_fail.wast
;;; ARGS*: --enable-gc
(;; STDOUT ;;;
init(externref:1) =>
test-sub() =>
test-canon() =>
out/test/spec/gc/br_on_cast_fail.wast:241: assert_invalid passed:
  out/test/spec/gc/br_on_cast_fail/br_on_cast_fail.3.wasm:0000029: error: type mismatch in block, expected [(ref 0)] but got [(ref null 0)]
  0000029: error: OnEndExpr callback failed
out/test/spec/gc/br_on_cast_fail.wast:250: assert_invalid passed:
  out/test/spec/gc/br_on_cast_fail/br_on_cast_fail.4.wasm:0000028: error: type mismatch: (ref null 0) is not a subtype of (ref any)
  0000028: error: OnBrOnCastExpr callback failed
out/test/spec/gc/br_on_cast_fail.wast:259: assert_invalid passed:
  out/test/spec/gc/br_on_cast_fail/br_on_cast_fail.5.wasm:0000027: error: type mismatch in br_on_cast_fail, expected [(ref any)] but got [anyref]
  0000027: error: OnBrOnCastExpr callback failed
out/test/spec/gc/br_on_cast_fail.wast:268: assert_invalid passed:
  out/test/spec/gc/br_on_cast_fail/br_on_cast_fail.6.wasm:000001f: error: type mismatch: anyref is not a subtype of eqref
  000001f: error: OnBrOnCastExpr callback failed
out/test/spec/gc/br_on_cast_fail.wast:276: assert_invalid passed:
  out/test/spec/gc/br_on_cast_fail/br_on_cast_fail.7.wasm:000001f: error: type mismatch: arrayref is not a subtype of structref
  000001f: error: OnBrOnCastExpr callback failed
out/test/spec/gc/br_on_cast_fail.wast:287: assert_invalid passed:
  out/test/spec/gc/br_on_cast_fail/br_on_cast_fail.8.wasm:0000036: error: type mismatch in call, expected [(ref null 0)] but got [funcref]
  0000036: error: OnCallExpr callback failed
37/37 tests passed.
;;; STDOUT ;;)
